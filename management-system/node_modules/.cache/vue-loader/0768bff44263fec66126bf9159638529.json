{"remainingRequest":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\Login.vue","mtime":1646716328331},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624891997656},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1633574065756},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624891997656},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1646716386708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyDlvJXlhaXlt6Xlhbflh73mlbANCmltcG9ydCB7IHB3ZFJlZyB9IGZyb20gIi4uL3V0aWxzL3JlZyI7DQovLyDlvJXlhaXor7fmsYLmjqXlj6PnmoTlh73mlbANCmltcG9ydCB7IGNoZWNrTG9naW4gfSBmcm9tICJAL2FwaS9hY2NvdW50IjsNCi8vIOW8leWFpeacrOWcsOWtmOWCqOW3peWFt+WHveaVsA0KaW1wb3J0IGxvY2FsIGZyb20gIkAvdXRpbHMvc2Vzc2lvbiI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgLy8g6Ieq5a6a5LmJ6aqM6K+B5a+G56CBDQogICAgY29uc3QgdmFsaWRhdGVQd2QgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBpZiAodmFsdWUgPT09ICIiKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5a+G56CBIikpOw0KICAgICAgfSBlbHNlIGlmICghcnVsZS5yZWd1bGFyLnRlc3QodmFsdWUpKSB7DQogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5a+G56CB55Sx5pWw5a2X5ZKM5a2X5q+N57uE5oiQ77yM6ZW/5bqmNi0xMuS9jSIpKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNhbGxiYWNrKCk7DQogICAgICB9DQogICAgfTsNCiAgICByZXR1cm4gew0KICAgICAgLy8g55m75b2V6KGo5Y2VDQogICAgICBsb2dpbkZvcm06IHsNCiAgICAgICAgYWNjb3VudDogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgIH0sDQogICAgICAvLyDmmL7npLrpmpDol48NCiAgICAgIGlzU2hvdzogZmFsc2UsDQogICAgICAvLyDpqozor4Hop4TliJnlr7nosaENCiAgICAgIGxvZ2luUnVsZXM6IHsNCiAgICAgICAgYWNjb3VudDogWw0KICAgICAgICAgIC8vIOmdnuepuumqjOivgQ0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLotKblj7fkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICAvLyDplb/luqYNCiAgICAgICAgICB7IG1pbjogNSwgbWF4OiAxMiwgbWVzc2FnZTogIui0puWPt+mVv+W6puS4ujUtMTLkvY0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgcGFzc3dvcmQ6IFsNCiAgICAgICAgICAvLyDpnZ7nqbrpqozor4ENCiAgICAgICAgICAvLyB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgLy8g6Ieq5a6a5LmJ6aqM6K+BDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVB3ZCwNCiAgICAgICAgICAgIHJlZ3VsYXI6IHB3ZFJlZygpLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaGFuZ2VUeXBlKGUpIHsNCiAgICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUuaW5jbHVkZXMoImlzU2hvdyIpKSB7DQogICAgICAgIHRoaXMuaXNTaG93ID0gIXRoaXMuaXNTaG93Ow0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g55m75b2VDQogICAgc3VibWl0Rm9ybSgpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMubG9naW5Gb3JtLnZhbGlkYXRlKTsNCiAgICAgIHRoaXMuJHJlZnMubG9naW5Gb3JtLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gew0KICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWxpZCk7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIC8vIOWPkemAgeeZu+W9leivt+axgg0KICAgICAgICAgIGxldCB7IGNvZGUsIHRva2VuLCByb2xlIH0gPSBhd2FpdCBjaGVja0xvZ2luKHRoaXMubG9naW5Gb3JtKTsNCg0KICAgICAgICAgIC8vIOWmguaenOeZu+W9leaIkOWKnyAg6Lez6L2s5Yiw5ZCO56uv6aaW6aG1DQogICAgICAgICAgaWYgKGNvZGUgPT09IDApIHsNCiAgICAgICAgICAgIC8vIOaKinRva2Vu5a2Y5YWl5pys5Zyw5a2Y5YKoDQogICAgICAgICAgICBsb2NhbC5zZXQoInRva2VuIiwgdG9rZW4pOw0KICAgICAgICAgICAgbG9jYWwuc2V0KCJyb2xlIiwgcm9sZSk7DQoNCiAgICAgICAgICAgIC8vIOi3s+i9rOWIsOmmlumhtQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ob21lIik7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <el-container>\r\n      <el-header>\r\n        <h1>\r\n          仓库管理系统\r\n          <span>登录</span>\r\n        </h1>\r\n      </el-header>\r\n      <el-main>\r\n        <!-- 登录表单 -->\r\n        <el-form\r\n          status-icon\r\n          :model=\"loginForm\"\r\n          :rules=\"loginRules\"\r\n          ref=\"loginForm\"\r\n          class=\"login-form\"\r\n        >\r\n          <div class=\"title\">\r\n            <h1>\r\n              系统登录\r\n            </h1>\r\n          </div>\r\n          <!-- 账号 -->\r\n          <el-form-item prop=\"account\">\r\n            <el-input\r\n              v-model=\"loginForm.account\"\r\n              prefix-icon=\"iconfont icon-zhanghao1\"\r\n              type=\"account\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 密码 -->\r\n          <el-form-item prop=\"password\">\r\n            <el-input\r\n              v-model=\"loginForm.password\"\r\n              @click.native=\"changeType\"\r\n              prefix-icon=\"iconfont icon-mima\"\r\n              :suffix-icon=\"\r\n                isShow\r\n                  ? 'iconfont isShow icon-xianshi'\r\n                  : 'iconfont isShow icon-yincang'\r\n              \"\r\n              :type=\"isShow ? 'text' : 'password'\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 按钮 -->\r\n          <el-form-item>\r\n            <el-button class=\"login-button\" type=\"primary\" @click=\"submitForm\"\r\n              >登录</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-main>\r\n      <el-footer\r\n        ><div class=\"copyright\">\r\n          <h1>\r\n            &copy;毕业设计&nbsp;版权所有：四川师范大学&nbsp;物理与电子工程学院&nbsp;2016级&nbsp;顾郑凯\r\n          </h1>\r\n        </div></el-footer\r\n      >\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 引入工具函数\r\nimport { pwdReg } from \"../utils/reg\";\r\n// 引入请求接口的函数\r\nimport { checkLogin } from \"@/api/account\";\r\n// 引入本地存储工具函数\r\nimport local from \"@/utils/session\";\r\nexport default {\r\n  data() {\r\n    // 自定义验证密码\r\n    const validatePwd = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入密码\"));\r\n      } else if (!rule.regular.test(value)) {\r\n        callback(new Error(\"密码由数字和字母组成，长度6-12位\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      // 登录表单\r\n      loginForm: {\r\n        account: \"\",\r\n        password: \"\",\r\n      },\r\n      // 显示隐藏\r\n      isShow: false,\r\n      // 验证规则对象\r\n      loginRules: {\r\n        account: [\r\n          // 非空验证\r\n          { required: true, message: \"账号不能为空\", trigger: \"blur\" },\r\n          // 长度\r\n          { min: 5, max: 12, message: \"账号长度为5-12位\", trigger: \"blur\" },\r\n        ],\r\n        password: [\r\n          // 非空验证\r\n          // { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          // 自定义验证\r\n          {\r\n            validator: validatePwd,\r\n            regular: pwdReg(),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    changeType(e) {\r\n      if (e.target.className.includes(\"isShow\")) {\r\n        this.isShow = !this.isShow;\r\n      }\r\n    },\r\n    // 登录\r\n    submitForm() {\r\n      // console.log(this.$refs.loginForm.validate);\r\n      this.$refs.loginForm.validate(async (valid) => {\r\n        // console.log(valid);\r\n        if (valid) {\r\n          // 发送登录请求\r\n          let { code, token, role } = await checkLogin(this.loginForm);\r\n\r\n          // 如果登录成功  跳转到后端首页\r\n          if (code === 0) {\r\n            // 把token存入本地存储\r\n            local.set(\"token\", token);\r\n            local.set(\"role\", role);\r\n\r\n            // 跳转到首页\r\n            this.$router.push(\"/home\");\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.login {\r\n  width: 100%;\r\n  height: 100%;\r\n  // background: #f5f5f6;\r\n  .el-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    .el-header {\r\n      color: #333;\r\n      text-align: left;\r\n      line-height: 60px;\r\n      h1 {\r\n        color: #ff6a00;\r\n        font-size: 24px;\r\n        margin: 0 auto;\r\n        max-width: 1200px;\r\n        span {\r\n          font-size: 24px;\r\n          color: #181818;\r\n          letter-spacing: 0;\r\n          height: 30px;\r\n          margin-left: 10px;\r\n          padding: 0 10px;\r\n          vertical-align: bottom;\r\n          border-left: 1px solid #999;\r\n        }\r\n      }\r\n    }\r\n    .el-main {\r\n      background-color: #e9eef3;\r\n      color: #333;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      flex-direction: column;\r\n      text-align: center;\r\n      line-height: 160px;\r\n      .login-form {\r\n        width: 400px;\r\n        .title {\r\n          h1 {\r\n            text-align: center;\r\n            font-size: 30px;\r\n            color: #ff6a00;\r\n            line-height: 50px;\r\n            margin-bottom: 30px;\r\n          }\r\n        }\r\n        .el-input__icon {\r\n          color: #000;\r\n        }\r\n        .el-form-item.is-error .el-input__validateIcon {\r\n          color: #f56c6c;\r\n        }\r\n        .login-button {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n    .el-footer {\r\n      background-color: #e9eef3;\r\n\r\n      .copyright {\r\n        font-size: 12px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        color: #73777a;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}