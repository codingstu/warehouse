{"remainingRequest":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\Login.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\Login.vue","mtime":1646716328331},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":1646716386465},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1646716386708},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\postcss-loader\\src\\index.js","mtime":1624892018364},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\less-loader\\dist\\cjs.js","mtime":1625989675222},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624891997656},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1646716386708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoubG9naW4gew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICAvLyBiYWNrZ3JvdW5kOiAjZjVmNWY2Ow0KICAuZWwtY29udGFpbmVyIHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgLmVsLWhlYWRlciB7DQogICAgICBjb2xvcjogIzMzMzsNCiAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICBsaW5lLWhlaWdodDogNjBweDsNCiAgICAgIGgxIHsNCiAgICAgICAgY29sb3I6ICNmZjZhMDA7DQogICAgICAgIGZvbnQtc2l6ZTogMjRweDsNCiAgICAgICAgbWFyZ2luOiAwIGF1dG87DQogICAgICAgIG1heC13aWR0aDogMTIwMHB4Ow0KICAgICAgICBzcGFuIHsNCiAgICAgICAgICBmb250LXNpemU6IDI0cHg7DQogICAgICAgICAgY29sb3I6ICMxODE4MTg7DQogICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDA7DQogICAgICAgICAgaGVpZ2h0OiAzMHB4Ow0KICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsNCiAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tOw0KICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgIzk5OTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICAuZWwtbWFpbiB7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTllZWYzOw0KICAgICAgY29sb3I6ICMzMzM7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgIGxpbmUtaGVpZ2h0OiAxNjBweDsNCiAgICAgIC5sb2dpbi1mb3JtIHsNCiAgICAgICAgd2lkdGg6IDQwMHB4Ow0KICAgICAgICAudGl0bGUgew0KICAgICAgICAgIGgxIHsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMzBweDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmY2YTAwOw0KICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAuZWwtaW5wdXRfX2ljb24gew0KICAgICAgICAgIGNvbG9yOiAjMDAwOw0KICAgICAgICB9DQogICAgICAgIC5lbC1mb3JtLWl0ZW0uaXMtZXJyb3IgLmVsLWlucHV0X192YWxpZGF0ZUljb24gew0KICAgICAgICAgIGNvbG9yOiAjZjU2YzZjOw0KICAgICAgICB9DQogICAgICAgIC5sb2dpbi1idXR0b24gew0KICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC5lbC1mb290ZXIgew0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U5ZWVmMzsNCg0KICAgICAgLmNvcHlyaWdodCB7DQogICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICBsaW5lLWhlaWdodDogNjBweDsNCiAgICAgICAgY29sb3I6ICM3Mzc3N2E7DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <el-container>\r\n      <el-header>\r\n        <h1>\r\n          仓库管理系统\r\n          <span>登录</span>\r\n        </h1>\r\n      </el-header>\r\n      <el-main>\r\n        <!-- 登录表单 -->\r\n        <el-form\r\n          status-icon\r\n          :model=\"loginForm\"\r\n          :rules=\"loginRules\"\r\n          ref=\"loginForm\"\r\n          class=\"login-form\"\r\n        >\r\n          <div class=\"title\">\r\n            <h1>\r\n              系统登录\r\n            </h1>\r\n          </div>\r\n          <!-- 账号 -->\r\n          <el-form-item prop=\"account\">\r\n            <el-input\r\n              v-model=\"loginForm.account\"\r\n              prefix-icon=\"iconfont icon-zhanghao1\"\r\n              type=\"account\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 密码 -->\r\n          <el-form-item prop=\"password\">\r\n            <el-input\r\n              v-model=\"loginForm.password\"\r\n              @click.native=\"changeType\"\r\n              prefix-icon=\"iconfont icon-mima\"\r\n              :suffix-icon=\"\r\n                isShow\r\n                  ? 'iconfont isShow icon-xianshi'\r\n                  : 'iconfont isShow icon-yincang'\r\n              \"\r\n              :type=\"isShow ? 'text' : 'password'\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <!-- 按钮 -->\r\n          <el-form-item>\r\n            <el-button class=\"login-button\" type=\"primary\" @click=\"submitForm\"\r\n              >登录</el-button\r\n            >\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-main>\r\n      <el-footer\r\n        ><div class=\"copyright\">\r\n          <h1>\r\n            &copy;毕业设计&nbsp;版权所有：四川师范大学&nbsp;物理与电子工程学院&nbsp;2016级&nbsp;顾郑凯\r\n          </h1>\r\n        </div></el-footer\r\n      >\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 引入工具函数\r\nimport { pwdReg } from \"../utils/reg\";\r\n// 引入请求接口的函数\r\nimport { checkLogin } from \"@/api/account\";\r\n// 引入本地存储工具函数\r\nimport local from \"@/utils/session\";\r\nexport default {\r\n  data() {\r\n    // 自定义验证密码\r\n    const validatePwd = (rule, value, callback) => {\r\n      if (value === \"\") {\r\n        callback(new Error(\"请输入密码\"));\r\n      } else if (!rule.regular.test(value)) {\r\n        callback(new Error(\"密码由数字和字母组成，长度6-12位\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      // 登录表单\r\n      loginForm: {\r\n        account: \"\",\r\n        password: \"\",\r\n      },\r\n      // 显示隐藏\r\n      isShow: false,\r\n      // 验证规则对象\r\n      loginRules: {\r\n        account: [\r\n          // 非空验证\r\n          { required: true, message: \"账号不能为空\", trigger: \"blur\" },\r\n          // 长度\r\n          { min: 5, max: 12, message: \"账号长度为5-12位\", trigger: \"blur\" },\r\n        ],\r\n        password: [\r\n          // 非空验证\r\n          // { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          // 自定义验证\r\n          {\r\n            validator: validatePwd,\r\n            regular: pwdReg(),\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    changeType(e) {\r\n      if (e.target.className.includes(\"isShow\")) {\r\n        this.isShow = !this.isShow;\r\n      }\r\n    },\r\n    // 登录\r\n    submitForm() {\r\n      // console.log(this.$refs.loginForm.validate);\r\n      this.$refs.loginForm.validate(async (valid) => {\r\n        // console.log(valid);\r\n        if (valid) {\r\n          // 发送登录请求\r\n          let { code, token, role } = await checkLogin(this.loginForm);\r\n\r\n          // 如果登录成功  跳转到后端首页\r\n          if (code === 0) {\r\n            // 把token存入本地存储\r\n            local.set(\"token\", token);\r\n            local.set(\"role\", role);\r\n\r\n            // 跳转到首页\r\n            this.$router.push(\"/home\");\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.login {\r\n  width: 100%;\r\n  height: 100%;\r\n  // background: #f5f5f6;\r\n  .el-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    .el-header {\r\n      color: #333;\r\n      text-align: left;\r\n      line-height: 60px;\r\n      h1 {\r\n        color: #ff6a00;\r\n        font-size: 24px;\r\n        margin: 0 auto;\r\n        max-width: 1200px;\r\n        span {\r\n          font-size: 24px;\r\n          color: #181818;\r\n          letter-spacing: 0;\r\n          height: 30px;\r\n          margin-left: 10px;\r\n          padding: 0 10px;\r\n          vertical-align: bottom;\r\n          border-left: 1px solid #999;\r\n        }\r\n      }\r\n    }\r\n    .el-main {\r\n      background-color: #e9eef3;\r\n      color: #333;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      flex-direction: column;\r\n      text-align: center;\r\n      line-height: 160px;\r\n      .login-form {\r\n        width: 400px;\r\n        .title {\r\n          h1 {\r\n            text-align: center;\r\n            font-size: 30px;\r\n            color: #ff6a00;\r\n            line-height: 50px;\r\n            margin-bottom: 30px;\r\n          }\r\n        }\r\n        .el-input__icon {\r\n          color: #000;\r\n        }\r\n        .el-form-item.is-error .el-input__validateIcon {\r\n          color: #f56c6c;\r\n        }\r\n        .login-button {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n    .el-footer {\r\n      background-color: #e9eef3;\r\n\r\n      .copyright {\r\n        font-size: 12px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        color: #73777a;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}