{"remainingRequest":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\StoreManage\\GoodsList.vue?vue&type=style&index=0&id=1bdc3081&lang=less&scoped=true&","dependencies":[{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\StoreManage\\GoodsList.vue","mtime":1651998445952},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\css-loader\\dist\\cjs.js","mtime":1646716386465},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1646716386708},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\postcss-loader\\src\\index.js","mtime":1624892018364},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\less-loader\\dist\\cjs.js","mtime":1625989675222},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624891997656},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1646716386708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5nb29kcy1tYW5hZ2Ugew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICAuZWwtZm9ybSB7DQogICAgcGFkZGluZy10b3A6IDIwcHg7DQogIH0NCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsNCiAgLmRlbW8tdGFibGUtZXhwYW5kIHsNCiAgICBmb250LXNpemU6IDA7DQogIH0NCiAgLmRlbW8tdGFibGUtZXhwYW5kIGxhYmVsIHsNCiAgICB3aWR0aDogOTBweDsNCiAgICBjb2xvcjogIzk5YTliZjsNCiAgfQ0KICAuZGVtby10YWJsZS1leHBhbmQgLmVsLWZvcm0taXRlbSB7DQogICAgbWFyZ2luLXJpZ2h0OiAwOw0KICAgIG1hcmdpbi1ib3R0b206IDA7DQogICAgd2lkdGg6IDUwJTsNCiAgICAuZWwtZm9ybS1pdGVtX19jb250ZW50IHsNCiAgICAgIHNwYW4gew0KICAgICAgICBjb2xvcjogYnJvd247DQogICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICAuZWwtYnV0dG9uIHsNCiAgICBtYXJnaW46IDA7DQogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICB9DQp9DQo="},{"version":3,"sources":["GoodsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GoodsList.vue","sourceRoot":"src/views/StoreManage","sourcesContent":["<template>\r\n  <div class=\"goods-manage\">\r\n    <el-form\r\n      style=\"margin-bottom: 20px;\"\r\n      size=\"small\"\r\n      :inline=\"true\"\r\n      :model=\"searchForm\"\r\n      class=\"demo-form-inline\"\r\n    >\r\n      <!-- 货物码 -->\r\n      <el-form-item label=\"货物码\">\r\n        <el-input\r\n          v-model=\"searchForm.goodscoding\"\r\n          placeholder=\"货物码\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 货物名称 -->\r\n      <el-form-item label=\"货物名称\">\r\n        <el-input\r\n          v-model=\"searchForm.goodsName\"\r\n          placeholder=\"货物名称\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <!-- 清除按钮和查询按钮 -->\r\n      <el-form-item style=\"margin-left: 30px;\">\r\n        <el-button type=\"primary\" @click=\"search\">查询</el-button>\r\n        <el-button type=\"primary\" @click=\"clear\">清除</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-divider></el-divider>\r\n\r\n    <el-table :data=\"tableData\" style=\"width: 100%;\">\r\n      <!-- 下拉框 可以展开 -->\r\n      <el-table-column type=\"expand\">\r\n        <template slot-scope=\"props\">\r\n          <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n            <el-form-item label=\"货物ID\">\r\n              <span>{{ props.row.id }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"货物码\">\r\n              <span>{{ props.row.goodscoding }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"货物图片\">\r\n              <span>\r\n                <img\r\n                  width=\"100\"\r\n                  height=\"100\"\r\n                  style=\"border-radius: 4px;\"\r\n                  :src=\"serveApi + props.row.imgUrl\"\r\n                />\r\n              </span>\r\n            </el-form-item>\r\n            <el-form-item label=\"货物名称\">\r\n              <span>{{ props.row.goodsname }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"货物分类\">\r\n              <span>{{ props.row.goodscategory }}</span>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"货物描述\">\r\n              <span>{{ props.row.goodsdesc }}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"货物数量\">\r\n              <span>{{ props.row.goodsquantity }}</span>\r\n            </el-form-item>\r\n          </el-form>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <!-- 详情 -->\r\n      <el-table-column label=\"货物 ID\" prop=\"id\"></el-table-column>\r\n      <el-table-column label=\"货物码\" prop=\"goodscoding\"></el-table-column>\r\n      <el-table-column label=\"货物名称\" prop=\"goodsname\"></el-table-column>\r\n      <el-table-column label=\"描述\" prop=\"goodsdesc\"></el-table-column>\r\n      <el-table-column label=\"库存数量\" prop=\"goodsquantity\"></el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"handleDel(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div style=\"margin-top: 20px; padding: 10px;\">\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"currentPage\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getGoodsList, goodsDel } from '@/api/store'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      serveApi: 'http://127.0.0.1:5000/upload/goods/',\r\n      // 搜索表格\r\n      searchForm: {\r\n        goodscoding: '',\r\n        goodsName: '',\r\n      },\r\n      // 表格数据\r\n      currentPage: 1,\r\n      total: 0,\r\n      pageSize: 5,\r\n      tableData: [],\r\n      warning: '',\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getGoods()\r\n  },\r\n  methods: {\r\n    // 查询\r\n    search() {\r\n      this.currentPage = 1\r\n      this.getGoods() // 调用获取列表函数\r\n    },\r\n    // 清除\r\n    clear() {\r\n      // 清空整个搜索表单\r\n      this.searchForm = {\r\n        goodscoding: '',\r\n        goodsName: '',\r\n      }\r\n      // 请求所有数据\r\n      this.getGoods()\r\n    },\r\n    // 当前页码改变\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val\r\n      this.getGoods()\r\n    },\r\n\r\n    // 获取货物列表\r\n    async getGoods() {\r\n      // 参数\r\n      let params = {\r\n        currentPage: this.currentPage,\r\n        pageSize: this.pageSize,\r\n        goodscoding: this.searchForm.goodscoding,\r\n        goodsName: this.searchForm.goodsName,\r\n      }\r\n      // 发送获取货物列表的请求\r\n      let { total, data } = await getGoodsList(params)\r\n      data.forEach((i) => {\r\n        console.log(i.goodsquantity)\r\n        if (i.goodsquantity <= 10) {\r\n          i.goodsquantity += '(库存告急，请及时补充)'\r\n        }\r\n      })\r\n      // 赋值渲染\r\n      this.total = total\r\n      // 数据\r\n      this.tableData = data\r\n      console.log(data)\r\n    },\r\n    // 编辑货物\r\n    handleEdit(row) {\r\n      // 把要编辑的货物出存入会话存储\r\n      window.sessionStorage.setItem('goods', JSON.stringify(row))\r\n      // 跳转到货物编辑页面\r\n      this.$router.push('/home/goodsedit')\r\n    },\r\n    // 删除\r\n    handleDel(row) {\r\n      console.log(row)\r\n      this.$confirm('你确定要删除吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n        // 确定\r\n        .then(async () => {\r\n          let { code, msg } = await goodsDel({ goodsname: row.goodsname }) // 发送删除请求\r\n          // 成功\r\n          if (code === 0) {\r\n            // 刷新列表（重新请求列表数据）\r\n            this.getGoods()\r\n          }\r\n          // 失败，响应拦截\r\n        })\r\n        // 取消\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除',\r\n          })\r\n        })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.goods-manage {\r\n  width: 100%;\r\n  height: 100%;\r\n  .el-form {\r\n    padding-top: 20px;\r\n  }\r\n  background-color: #ffffff;\r\n  .demo-table-expand {\r\n    font-size: 0;\r\n  }\r\n  .demo-table-expand label {\r\n    width: 90px;\r\n    color: #99a9bf;\r\n  }\r\n  .demo-table-expand .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    width: 50%;\r\n    .el-form-item__content {\r\n      span {\r\n        color: brown;\r\n        text-decoration: underline;\r\n      }\r\n    }\r\n  }\r\n  .el-button {\r\n    margin: 0;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n</style>\r\n"]}]}