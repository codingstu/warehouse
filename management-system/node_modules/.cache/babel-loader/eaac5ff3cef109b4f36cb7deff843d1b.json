{"remainingRequest":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\babel-loader\\lib\\index.js!D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\PersonalCenter.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\src\\views\\PersonalCenter.vue","mtime":1646716328334},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624891997656},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\babel-loader\\lib\\index.js","mtime":1633574065756},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1624891997656},{"path":"D:\\Study\\vue\\bishe\\warehouse-management-system\\management-system\\node_modules\\vue-loader\\lib\\index.js","mtime":1646716386708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXFN0dWR5XFx2dWVcXGJpc2hlXFx3YXJlaG91c2UtbWFuYWdlbWVudC1zeXN0ZW1cXG1hbmFnZW1lbnQtc3lzdGVtXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g6I635Y+W6LSm5Y+35L+h5oGvCmltcG9ydCB7IGdldEFjY291bnRJbmZvIGFzIF9nZXRBY2NvdW50SW5mbywgZWRpdEF2YXRhckltZyB9IGZyb20gIkAvYXBpL2FjY291bnQiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VydmVBcGk6ICJodHRwOi8vMTI3LjAuMC4xOjUwMDAvdXBsb2FkL2FjY291bnQvIiwKICAgICAgYWNjb3VudEluZm86IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgLy8gaWQKICAgICAgICBhY2NvdW50OiAiIiwKICAgICAgICAvLyDotKblj7cKICAgICAgICB1c2VyR3JvdXA6ICIiLAogICAgICAgIC8vIOeUqOaIt+e7hAogICAgICAgIGN0aW1lOiAiIiwKICAgICAgICAvLyDml7bpl7QKICAgICAgICBpbWdVcmw6ICIiIC8vIOWbvueJh+WcsOWdgAoKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPlui0puWPt+S/oeaBrwogICAgZ2V0QWNjb3VudEluZm86IGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX3lpZWxkJF9nZXRBY2NvdW50SW5mLCBhY2NvdW50SW5mbzsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX2dldEFjY291bnRJbmZvKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRfZ2V0QWNjb3VudEluZiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBhY2NvdW50SW5mbyA9IF95aWVsZCRfZ2V0QWNjb3VudEluZi5hY2NvdW50SW5mbzsKICAgICAgICAgICAgICAgIF90aGlzLmFjY291bnRJbmZvID0gYWNjb3VudEluZm87IC8vIOi1i+WAvOa4suafkwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5aS05YOP5LiK5Lyg5oiQ5YqfCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzOiBmdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgewogICAgICAvLyDlm57loavlpLTlg48KICAgICAgdmFyIGNvZGUgPSByZXMuY29kZSwKICAgICAgICAgIGltZ1VybCA9IHJlcy5pbWdVcmw7CgogICAgICBpZiAoY29kZSA9PT0gMCkgewogICAgICAgIHRoaXMuYWNjb3VudEluZm8uaW1nVXJsID0gaW1nVXJsOwogICAgICB9CiAgICB9LAogICAgLy8g5aS05YOP5LiK5Lyg5LmL5YmN6ZmQ5Yi2CiAgICBiZWZvcmVBdmF0YXJVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZUF2YXRhclVwbG9hZCgpIHt9LAogICAgLy8g5L+u5pS55aS05YOPCiAgICBlZGl0QXZhdGFyOiBmdW5jdGlvbiBlZGl0QXZhdGFyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfeWllbGQkZWRpdEF2YXRhckltZywgY29kZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBlZGl0QXZhdGFySW1nKHsKICAgICAgICAgICAgICAgICAgaW1nVXJsOiBfdGhpczIuYWNjb3VudEluZm8uaW1nVXJsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJGVkaXRBdmF0YXJJbWcgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvZGUgPSBfeWllbGQkZWRpdEF2YXRhckltZy5jb2RlOwoKICAgICAgICAgICAgICAgIGlmIChjb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIC8vIOWPkeWHuumAmuefpeabtOaWsOWktOWDjwogICAgICAgICAgICAgICAgICBfdGhpczIuJGJ1cy4kZW1pdCgidXBkYXRlQXZhdGFyIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgdGhpcy5nZXRBY2NvdW50SW5mbygpOwogIH0sCiAgZmlsdGVyczogewogICAgLy8g6L+H5ruk5pe26Ze0CiAgICBmaWx0ZXJUaW1lOiBmdW5jdGlvbiBmaWx0ZXJUaW1lKHRpbWUpIHsKICAgICAgcmV0dXJuIG1vbWVudCh0aW1lKS5mb3JtYXQoIllZWVktTU0tREQgSEg6bW06c3MiKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["PersonalCenter.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA,SAAA,cAAA,IAAA,eAAA,EAAA,aAAA,QAAA,eAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,uCADA;AAEA,MAAA,WAAA,EAAA;AACA,QAAA,EAAA,EAAA,EADA;AACA;AACA,QAAA,OAAA,EAAA,EAFA;AAEA;AACA,QAAA,SAAA,EAAA,EAHA;AAGA;AACA,QAAA,KAAA,EAAA,EAJA;AAIA;AACA,QAAA,MAAA,EAAA,EALA,CAKA;;AALA;AAFA,KAAA;AAUA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,cAFA,4BAEA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,eAAA,EADA;;AAAA;AAAA;AACA,gBAAA,WADA,yBACA,WADA;AAEA,gBAAA,KAAA,CAAA,WAAA,GAAA,WAAA,CAFA,CAEA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KALA;AAMA;AACA,IAAA,mBAPA,+BAOA,GAPA,EAOA;AACA;AADA,UAEA,IAFA,GAEA,GAFA,CAEA,IAFA;AAAA,UAEA,MAFA,GAEA,GAFA,CAEA,MAFA;;AAGA,UAAA,IAAA,KAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,MAAA,GAAA,MAAA;AACA;AACA,KAbA;AAcA;AACA,IAAA,kBAfA,gCAeA,CAAA,CAfA;AAgBA;AACA,IAAA,UAjBA,wBAiBA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,aAAA,CAAA;AAAA,kBAAA,MAAA,EAAA,MAAA,CAAA,WAAA,CAAA;AAAA,iBAAA,CAFA;;AAAA;AAAA;AAEA,gBAAA,IAFA,wBAEA,IAFA;;AAIA,oBAAA,IAAA,KAAA,CAAA,EAAA;AACA;AACA,kBAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,cAAA;AACA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAzBA,GAbA;AAwCA,EAAA,OAxCA,qBAwCA;AACA;AACA,SAAA,cAAA;AACA,GA3CA;AA6CA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,UAFA,sBAEA,IAFA,EAEA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,qBAAA,CAAA;AACA;AAJA;AA7CA,CAAA","sourcesContent":["<template>\r\n  <div class=\"personal\">\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>管理员信息</span>\r\n      </div>\r\n      <div>\r\n        <div>\r\n          <span>管理员ID: {{ accountInfo.id }}</span>\r\n          <el-divider></el-divider>\r\n          <span>账号： {{ accountInfo.account }}</span>\r\n          <el-divider></el-divider>\r\n          <span>用户组： {{ accountInfo.userGroup }}</span>\r\n          <el-divider></el-divider>\r\n          <span>创建时间： {{ accountInfo.ctime | filterTime }}</span>\r\n          <el-divider></el-divider>\r\n          <div class=\"avatar-wrap\" style=\"height: 100px;\">\r\n            <span>管理员头像：</span>\r\n            <div style=\"margin-top: 20px;\" class=\"avatar\">\r\n              <!-- 管理员头像 -->\r\n              <el-upload\r\n                class=\"avatar-uploader\"\r\n                action=\"http://127.0.0.1:5000/account/upload\"\r\n                :show-file-list=\"false\"\r\n                :on-success=\"handleAvatarSuccess\"\r\n                :before-upload=\"beforeAvatarUpload\"\r\n              >\r\n                <img\r\n                  v-if=\"accountInfo.imgUrl\"\r\n                  :src=\"serveApi + accountInfo.imgUrl\"\r\n                  class=\"avatar\"\r\n                />\r\n                <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n              </el-upload>\r\n            </div>\r\n\r\n            <el-button\r\n              @click=\"editAvatar\"\r\n              style=\"margin-left: 30px; margin-top: 15px;\"\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              >修改头像</el-button\r\n            >\r\n          </div>\r\n          <el-divider></el-divider>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 获取账号信息\r\nimport { getAccountInfo, editAvatarImg } from \"@/api/account\";\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      serveApi: \"http://127.0.0.1:5000/upload/account/\",\r\n      accountInfo: {\r\n        id: \"\", // id\r\n        account: \"\", // 账号\r\n        userGroup: \"\", // 用户组\r\n        ctime: \"\", // 时间\r\n        imgUrl: \"\", // 图片地址\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 获取账号信息\r\n    async getAccountInfo() {\r\n      let { accountInfo } = await getAccountInfo();\r\n      this.accountInfo = accountInfo; // 赋值渲染\r\n    },\r\n    // 头像上传成功\r\n    handleAvatarSuccess(res) {\r\n      // 回填头像\r\n      let { code, imgUrl } = res;\r\n      if (code === 0) {\r\n        this.accountInfo.imgUrl = imgUrl;\r\n      }\r\n    },\r\n    // 头像上传之前限制\r\n    beforeAvatarUpload() {},\r\n    // 修改头像\r\n    async editAvatar() {\r\n      // 发送请求 修改头像\r\n      let { code } = await editAvatarImg({ imgUrl: this.accountInfo.imgUrl });\r\n\r\n      if (code === 0) {\r\n        // 发出通知更新头像\r\n        this.$bus.$emit(\"updateAvatar\");\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // 获取用户信息\r\n    this.getAccountInfo();\r\n  },\r\n\r\n  filters: {\r\n    // 过滤时间\r\n    filterTime(time) {\r\n      return moment(time).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.personal {\r\n  .el-card__body {\r\n    text-align: left;\r\n  }\r\n  .avatar-wrap {\r\n    display: flex;\r\n    align-items: center;\r\n    .avatar {\r\n      width: 100px;\r\n      height: 100px;\r\n      border-radius: 4px;\r\n      .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n      }\r\n      .avatar-uploader .el-upload:hover {\r\n        border-color: #409eff;\r\n      }\r\n      .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 100px;\r\n        height: 100px;\r\n        line-height: 100px;\r\n        text-align: center;\r\n      }\r\n      .avatar {\r\n        width: 100px;\r\n        height: 100px;\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views"}]}